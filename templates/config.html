<!DOCTYPE html>
<html>

<head>
    <title>{{ translations.dashboard_title }} - {{ translations.settings }}</title>
    <link rel="icon" type="image/png" href="static/favicon.png">
    <link rel="stylesheet" href="static/css/config.css">
    <script src="static/js/socket.io.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body>
    <!-- Desktop Navigation Buttons (left side) -->
    <div class="desktop-nav-buttons">
        <button id="desktop-back-button" class="nav-button icon-only" onclick="window.location.href='/'" title="{{ translations.back_to_dashboard }}">
            <svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px">
                <path d="m274-450 248 248-42 42L140-500l340-340 42 42-248 248h526v60H274Z"/>
            </svg>
        </button>
        <button id="desktop-save-button" class="nav-button icon-only" title="{{ translations.save_configuration }}">
            <svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px">
                <path d="M840-680v480q0 33-23.5 56.5T760-120H200q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h480l160 160Zm-80 34L646-760H200v560h560v-446ZM480-240q50 0 85-35t35-85q0-50-35-85t-85-35q-50 0-85 35t-35 85q0 50 35 85t85 35ZM240-560h360v-160H240v160Zm-40-86v446-560 114Z"/>
            </svg>
        </button>
        <button id="desktop-logout-button" class="nav-button icon-only" title="{{ translations.logout }}">
            <svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px">
                <path d="M206.78-100.78q-44.3 0-75.15-30.85-30.85-30.85-30.85-75.15v-546.44q0-44.3 30.85-75.15 30.85-30.85 75.15-30.85h277.74v106H206.78v546.44h277.74v106H206.78Zm425.87-152.09L559-328.39 657.61-427H355.48v-106h302.13L559-631.61l73.65-75.52L859.22-480 632.65-252.87Z"/>
            </svg>
        </button>
    </div>

    <!-- Mobile Navigation Buttons (bottom) -->
    <div class="mobile-nav-buttons">
        <button id="mobile-back-button" class="mobile-nav-button icon-only" onclick="window.location.href='/'" title="{{ translations.back_to_dashboard }}">
            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px">
                <path d="m274-450 248 248-42 42L140-500l340-340 42 42-248 248h526v60H274Z"/>
            </svg>
        </button>
        <button id="mobile-save-button" class="mobile-nav-button icon-only" title="{{ translations.save_configuration }}">
            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px">
                <path d="M840-680v480q0 33-23.5 56.5T760-120H200q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h480l160 160Zm-80 34L646-760H200v560h560v-446ZM480-240q50 0 85-35t35-85q0-50-35-85t-85-35q-50 0-85 35t-35 85q0 50 35 85t85 35ZM240-560h360v-160H240v160Zm-40-86v446-560 114Z"/>
            </svg>
        </button>
        <button id="mobile-logout-button" class="mobile-nav-button icon-only" title="{{ translations.logout }}">
            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px">
                <path d="M206.78-100.78q-44.3 0-75.15-30.85-30.85-30.85-30.85-75.15v-546.44q0-44.3 30.85-75.15 30.85-30.85 75.15-30.85h277.74v106H206.78v546.44h277.74v106H206.78Zm425.87-152.09L559-328.39 657.61-427H355.48v-106h302.13L559-631.61l73.65-75.52L859.22-480 632.65-252.87Z"/>
            </svg>
        </button>
    </div>

    <div class="container">
        <div class="header">
            <h1>{{ translations.settings }}</h1>
            <p>{{ translations.configure_dashboard }}</p>
        </div>

        <div id="config-container">
            <!-- Configuration sections will be loaded here -->
        </div>
    </div>

    <!-- Delete Meme Confirmation Modal -->
    <div id="delete-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <h3>{{ translations.delete_confirmation_title }}</h3>
            <p>{{ translations.delete_confirmation_message }}</p>
            <div class="modal-buttons">
                <button id="confirm-delete" class="icon-button confirm">
                    <img src="{{ url_for('static', filename='icons/check.svg') }}" alt="Confirm">
                </button>
                <button id="cancel-delete" class="icon-button cancel">
                    <img src="{{ url_for('static', filename='icons/cancel.svg') }}" alt="Cancel">
                </button>
            </div>
        </div>
    </div>

    <!-- Meme Inspection Modal -->
    <div id="meme-modal" class="modal" style="display: none;">
        <div class="modal-content meme-modal-content">
            <div class="modal-header">
                <h3 id="meme-modal-title">Meme Preview</h3>
                <button class="modal-close" onclick="closeMemeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="meme-preview-container">
                    <img id="meme-modal-image" src="" alt="Meme Preview" />
                </div>
                <div class="meme-info">
                    <div class="meme-info-row" style="align-items: center;">
                        <strong>{{ translations.filename }}</strong> 
                        <span id="meme-modal-filename-display" style="display: inline;"></span>
                        <input type="text" id="meme-modal-filename-input" class="form-input" style="display: none; flex: 1; margin: 0 10px; padding: 4px 8px;">
                        <button id="meme-modal-edit-btn" class="icon-button" onclick="startRenameInModal()" title="{{ translations.rename_meme }}" style="padding: 4px 8px; margin-left: 8px;">
                            <img src="/static/icons/edit.svg" alt="Edit" style="width: 16px; height: 16px;" />
                        </button>
                        <button id="meme-modal-save-btn" class="icon-button" onclick="saveRenameInModal()" title="{{ translations.save }}" style="display: none; padding: 4px 8px; margin-left: 8px; background: #667eea;">
                            <img src="/static/icons/save.svg" alt="Save" style="width: 16px; height: 16px; filter: brightness(0) invert(1);" />
                        </button>
                        <button id="meme-modal-cancel-rename-btn" class="icon-button cancel" onclick="cancelRenameInModal()" title="{{ translations.cancel }}" style="display: none; padding: 4px 8px; margin-left: 4px;">
                            <img src="/static/icons/cancel.svg" alt="Cancel" style="width: 16px; height: 16px;" />
                        </button>
                    </div>
                    <div class="meme-info-row">
                        <strong>{{ translations.dimensions }}</strong> <span id="meme-modal-dimensions">{{ translations.loading }}</span>
                    </div>
                    <div class="meme-info-row">
                        <strong>{{ translations.file_size }}</strong> <span id="meme-modal-filesize">{{ translations.loading }}</span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="icon-button" onclick="downloadMemeFromModal()" title="{{ translations.download_meme }}">
                    <img src="/static/icons/download.svg" alt="Download" />
                </button>
                <button class="icon-button delete" onclick="deleteMemeFromModal()" title="{{ translations.delete_meme }}">
                    <img src="/static/icons/delete.svg" alt="Delete" />
                </button>
                <button class="icon-button cancel" onclick="closeMemeModal()" title="{{ translations.cancel }}">
                    <img src="/static/icons/cancel.svg" alt="Cancel" />
                </button>
            </div>
        </div>
    </div>

    <div id="notification" class="notification"></div>

    <script>
        // Make translations available to JavaScript
        window.translations = {{ translations | tojson }};
    </script>
    <script src="static/js/session-manager.js"></script>
    <script src="static/js/config.js"></script>
</body>

</html>